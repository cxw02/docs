import{u as U,j as te,m as ae,p as M,q as le,P as se,v as re,x as ie,l as b,y as H,z as oe,w as Y,k as a,A as ne,R as j,B as ue,C as ce,D as he,E as Ee,G as me,H as ve,I as ge,J as pe,K as de,L as R,M as ye,N as Ae,O as Be,Q as $,S as I,T as fe}from"./app-DqblKm8F.js";const De=["/portfolio.html","/","/config/i18n.html","/config/intro.html","/config/","/demo/disable.html","/demo/layout.html","/demo/markdown.html","/demo/page.html","/demo/pnpm%E9%95%9C%E5%83%8F%E6%BA%90%E8%AE%BE%E7%BD%AE.html","/demo/","/demo/%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B.html","/demo/%E6%96%87%E7%AB%A0%E6%A8%A1%E6%9D%BF.html","/demo/%E6%B5%8B%E8%AF%95.html","/%E5%8D%8E%E5%86%A0/","/config/Frontmatter/blog-home.html","/config/Frontmatter/info.html","/config/Frontmatter/layout.html","/config/Frontmatter/plugins.html","/config/Frontmatter/portfolio.html","/config/Frontmatter/project-home.html","/config/Frontmatter/","/config/plugins/blog.html","/config/plugins/comment.html","/config/plugins/copyright.html","/config/plugins/feed.html","/config/plugins/intro.html","/config/plugins/md-enhance.html","/config/plugins/others.html","/config/plugins/","/config/plugins/search.html","/config/theme/appearance.html","/config/theme/basic.html","/config/theme/behavior.html","/config/theme/feature.html","/config/theme/i18n.html","/config/theme/layout.html","/config/theme/","/404.html","/category/","/category/%E9%85%8D%E7%BD%AE/","/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/category/%E6%8C%87%E5%8D%97/","/category/%E7%AC%94%E8%AE%B0/","/tag/","/tag/%E5%A4%9A%E8%AF%AD%E8%A8%80/","/tag/%E4%BB%8B%E7%BB%8D/","/tag/%E7%A6%81%E7%94%A8/","/tag/%E5%8A%A0%E5%AF%86/","/tag/%E5%B8%83%E5%B1%80/","/tag/markdown/","/tag/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/npm/","/tag/yarn/","/tag/pnpm/","/tag/note/","/tag/frontmatter/","/tag/%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A1%B5/","/tag/%E4%BF%A1%E6%81%AF/","/tag/%E6%A1%A3%E6%A1%88/","/tag/%E9%A1%B9%E7%9B%AE%E4%B8%BB%E9%A1%B5/","/tag/%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE/","/tag/%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/","/tag/%E5%8D%9A%E5%AE%A2/","/tag/%E8%AF%84%E8%AE%BA/","/tag/%E7%89%88%E6%9D%83%E4%BF%A1%E6%81%AF/","/tag/feed/","/tag/%E6%8F%92%E4%BB%B6%E9%80%89%E9%A1%B9/","/tag/%E6%90%9C%E7%B4%A2/","/tag/%E5%A4%96%E8%A7%82/","/tag/%E5%9F%BA%E7%A1%80/","/tag/%E8%A1%8C%E4%B8%BA%E9%80%89%E9%A1%B9/","/tag/%E5%8A%9F%E8%83%BD/","/article/","/star/","/timeline/"],Fe="SEARCH_PRO_QUERY_HISTORY",d=U(Fe,[]),He=()=>{const{queryHistoryCount:l}=R,s=l>0;return{enabled:s,queryHistory:d,addQueryHistory:r=>{s&&(d.value=Array.from(new Set([r,...d.value.slice(0,l-1)])))},removeQueryHistory:r=>{d.value=[...d.value.slice(0,r),...d.value.slice(r+1)]}}},L=l=>De[l.id]+("anchor"in l?`#${l.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:_}=R,y=U(Re,[]),ke=()=>{const l=_>0;return{enabled:l,resultHistory:y,addResultHistory:s=>{if(l){const r={link:L(s),display:s.display};"header"in s&&(r.header=s.header),y.value=[r,...y.value.slice(0,_-1)]}},removeResultHistory:s=>{y.value=[...y.value.slice(0,s),...y.value.slice(s+1)]}}},Ce=l=>{const s=Ee(),r=M(),k=me(),o=b(0),f=H(()=>o.value>0),v=ve([]);return ge(()=>{const{search:g,terminate:C}=pe(),A=de(c=>{const B=c.join(" "),{searchFilter:w=m=>m,splitWord:Q,suggestionsFilter:O,...p}=s.value;B?(o.value+=1,g(c.join(" "),r.value,p).then(m=>w(m,B,r.value,k.value)).then(m=>{o.value-=1,v.value=m}).catch(m=>{console.warn(m),o.value-=1,o.value||(v.value=[])})):v.value=[]},R.searchDelay-R.suggestDelay);Y([l,r],([c])=>A(c),{immediate:!0}),ye(()=>{C()})}),{isSearching:f,results:v}};var Qe=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:s}){const r=ae(),k=M(),o=le(se),{enabled:f,addQueryHistory:v,queryHistory:g,removeQueryHistory:C}=He(),{enabled:A,resultHistory:c,addResultHistory:B,removeResultHistory:w}=ke(),Q=f||A,O=re(l,"queries"),{results:p,isSearching:m}=Ce(O),i=ie({isQuery:!0,index:0}),h=b(0),E=b(0),P=H(()=>Q&&(g.value.length>0||c.value.length>0)),q=H(()=>p.value.length>0),x=H(()=>p.value[h.value]||null),z=()=>{const{isQuery:e,index:t}=i;t===0?(i.isQuery=!e,i.index=e?c.value.length-1:g.value.length-1):i.index=t-1},G=()=>{const{isQuery:e,index:t}=i;t===(e?g.value.length-1:c.value.length-1)?(i.isQuery=!e,i.index=0):i.index=t+1},J=()=>{h.value=h.value>0?h.value-1:p.value.length-1,E.value=x.value.contents.length-1},K=()=>{h.value=h.value<p.value.length-1?h.value+1:0,E.value=0},N=()=>{E.value<x.value.contents.length-1?E.value+=1:K()},V=()=>{E.value>0?E.value-=1:J()},S=e=>e.map(t=>fe(t)?t:a(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=Ae[e.index]||"$content",[n,F=""]=Be(t)?t[k.value].split("$content"):t.split("$content");return e.display.map(u=>a("div",S([n,...u,F])))}return e.display.map(t=>a("div",S(t)))},D=()=>{h.value=0,E.value=0,s("updateQuery",""),s("close")},X=()=>f?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.queryHistory),g.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===t}],onClick:()=>{s("updateQuery",e)}},[a($,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:n=>{n.preventDefault(),n.stopPropagation(),C(t)}})]))])):null,Z=()=>A?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.resultHistory),c.value.map((e,t)=>a(j,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===t}],onClick:()=>{D()}},()=>[a($,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(n=>S(n)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:n=>{n.preventDefault(),n.stopPropagation(),w(t)}})]))])):null;return oe("keydown",e=>{if(l.isFocusing){if(q.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const t=x.value.contents[E.value];v(l.queries.join(" ")),B(t),r.push(L(t)),D()}}else if(A){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=i;i.isQuery?(s("updateQuery",g.value[t]),e.preventDefault()):(r.push(c.value[t].link),D())}}}}),Y([h,E],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!q.value:!P.value}],id:"search-pro-results"},l.queries.length?m.value?a(ne,{hint:o.value.searching}):q.value?a("ul",{class:"search-pro-result-list"},p.value.map(({title:e,contents:t},n)=>{const F=h.value===n;return a("li",{class:["search-pro-result-list-item",{active:F}]},[a("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),t.map((u,ee)=>{const T=F&&E.value===ee;return a(j,{to:L(u),class:["search-pro-result-item",{active:T,"aria-selected":T}],onClick:()=>{v(l.queries.join(" ")),B(u),D()}},()=>[u.type==="text"?null:a(u.type==="title"?ue:u.type==="heading"?ce:he,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?a("div",{class:"content-header"},u.header):null,a("div",W(u))])])})])})):o.value.emptyResult:Q?P.value?[X(),Z()]:o.value.emptyHistory:o.value.emptyResult)}});export{Qe as default};
